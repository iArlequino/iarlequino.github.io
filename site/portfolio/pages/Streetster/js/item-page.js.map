{"version":3,"sources":["item-page.js"],"names":["productSwiper","Swiper","loop","centeredSlides","watchSlidesVisibility","navigation","nextEl","prevEl","pagination","el","clickable","spaceBetween","slidesPerColumn","slidesPerView","on","[object Object]","Array","from","this","slides","forEach","swiperSlide","i","slide","querySelector","classList","contains","style","display","productSwiperWrapper","wrapperEl","call","height","setTimeout","clientHeight","radioInputColor","document","querySelectorAll","colorText","item","addEventListener","e","textContent","target","value","keyCode","radioInputFrame","frameText","click","ratings","initRatings","ratingActive","ratingValue","initRatingVars","rating","ratingActiveWidth","index","innerHTML","width","ratingItem","dataset","ajax","async","add","response","fetch","method","ok","result","json","newRating","ratingSnackbar","getElementById","className","replace","remove","setRatingValue","setRating","initRating","length"],"mappings":"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","file":"item-page.js","sourcesContent":["// Slider\r\nconst productSwiper = new Swiper('.product__swiper', {\r\n\tloop: true,\r\n\tcenteredSlides: true,\r\n\twatchSlidesVisibility: true,\r\n\tnavigation: {\r\n\t\tnextEl: '.product-swiper-btn-next',\r\n\t\tprevEl: '.product-swiper-btn-prev',\r\n\t},\r\n\tpagination: {\r\n\t\tel: '.product-swiper-pagination',\r\n\t\tclickable: true,\r\n\t},\r\n\tspaceBetween: 40,\r\n\tslidesPerColumn: 1,\r\n\tslidesPerView: 1,\r\n\ton: {\r\n\t\tinit() {\r\n\t\t\tArray.from(this.slides).forEach((swiperSlide, i) => {\r\n\t\t\t\tconst slide = swiperSlide.querySelector('.swiper-slide__wrapper');\r\n\t\t\t\tif (!swiperSlide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetTranslate() {\r\n\t\t\tArray.from(this.slides).forEach((slide,) => {\r\n\t\t\t\tif (slide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.querySelector('.swiper-slide__wrapper').style.display = '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttransitionEnd() {\r\n\t\t\tArray.from(this.slides).forEach((slide) => {\r\n\t\t\t\tif (!slide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.querySelector('.swiper-slide__wrapper').style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n});\r\n\r\n// Slide auto height\r\nconst productSwiperWrapper = productSwiper.wrapperEl;\r\n[].forEach.call(productSwiper.slides, function (slide) {\r\n\tslide.style.height = \"\";\r\n});\r\nsetTimeout(() => {\r\n\t[].forEach.call(productSwiper.slides, function (slide) {\r\n\t\tslide.style.height = productSwiperWrapper.clientHeight + \"px\";\r\n\t});\r\n}, 300);\r\n\r\n// Input check\r\nconst radioInputColor = document.querySelectorAll(\".product__radio-input\");\r\nconst colorText = document.querySelector('.color')\r\n\r\nradioInputColor.forEach((item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\tcolorText.textContent = e.target.value;\r\n\t})\r\n\titem.addEventListener('keydown', function (e) {\r\n\t\tif (e.keyCode === 13) {\r\n\t\t\tcolorText.textContent = e.target.value;\r\n\t\t}\r\n\t})\r\n})\r\n\r\nconst radioInputFrame = document.querySelectorAll(\".product__radio-frame-input\");\r\nconst frameText = document.querySelector('.frame')\r\n\r\nradioInputFrame.forEach((item) => {\r\n\titem.addEventListener('click', (e) => {\r\n\t\tframeText.textContent = e.target.value;\r\n\t})\r\n\titem.addEventListener('keydown', function (e) {\r\n\t\tif (e.keyCode === 13) {\r\n\t\t\titem.click();\r\n\t\t}\r\n\t})\r\n})\r\n\r\n// Raiting\r\nconst ratings = document.querySelectorAll('.rating')\r\nif (ratings.length > 0) {\r\n\tinitRatings();\r\n}\r\n\r\nfunction initRatings() {\r\n\tlet ratingActive, ratingValue;\r\n\tratings.forEach((rating) => {\r\n\t\tinitRating(rating);\r\n\t})\r\n\r\n\tfunction initRating(rating) {\r\n\t\tinitRatingVars(rating);\r\n\t\tratingActiveWidth();\r\n\t\tif (rating.classList.contains('rating-set')) {\r\n\t\t\tsetRating(rating);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initRatingVars(rating) {\r\n\t\tratingActive = rating.querySelector('.rating__active');\r\n\t\tratingValue = rating.querySelector('.rating__value');\r\n\t}\r\n\tfunction ratingActiveWidth(index = ratingValue.innerHTML) {\r\n\t\tconst ratingActiveWidth = index / 0.05;\r\n\t\tratingActive.style.width = `${ratingActiveWidth}%`;\r\n\t}\r\n\r\n\tfunction setRating(rating) {\r\n\t\tconst ratingItems = rating.querySelectorAll('.rating__item');\r\n\t\tratingItems.forEach((ratingItem, i) => {\r\n\t\t\tratingItem.addEventListener('mouseenter', () => {\r\n\t\t\t\tinitRatingVars(rating)\r\n\t\t\t\tratingActiveWidth(ratingItem.value)\r\n\t\t\t})\r\n\t\t\tratingItem.addEventListener('mouseleave', () => {\r\n\t\t\t\tinitRatingVars(rating)\r\n\t\t\t\tratingActiveWidth()\r\n\t\t\t})\r\n\t\t\tratingItem.addEventListener('click', () => {\r\n\t\t\t\tinitRatingVars(rating)\r\n\t\t\t\tif (rating.dataset.ajax) {\r\n\t\t\t\t\t// По нажатию на рейтинг\r\n\t\t\t\t\tsetRatingValue(ratingItem.value, rating)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// По кнопке подтверждения \r\n\t\t\t\t\tratingValue.innerHTML = i + 1;\r\n\t\t\t\t\tratingActiveWidth();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\tasync function setRatingValue(value, rating) {\r\n\t\tif (!rating.classList.contains('rating-sending')) {\r\n\t\t\trating.classList.add('rating-sending');\r\n\t\t\tlet response = await fetch('/resources/rating.json', {\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\t/* // Реальная отправка на сервер\r\n\t\t\t\t\tbody: JSON.strignify({\r\n\t\t\t\t\t\tuserRaiting: value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t'content-type':'application/json'\r\n\t\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t});\r\n\t\t\tif (response.ok) {\r\n\t\t\t\t// Таймаут нужно убрать, это просто для примера, чтобы посмотреть добавляется ли класс!!\r\n\t\t\t\tconst result = await response.json();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst newRating = result.newRating;\r\n\t\t\t\t\tratingValue.innerHTML = newRating;\r\n\t\t\t\t\tratingActiveWidth();\r\n\t\t\t\t\t// Получить снэк-бар DIV\r\n\t\t\t\t\tlet ratingSnackbar = document.getElementById(\"snackbar-rating\");\r\n\t\t\t\t\t// Добавить \"show\" класс для DIV\r\n\t\t\t\t\tratingSnackbar.className = \"show\";\r\n\t\t\t\t\t// После 3 секунд, извлеките класс show из DIV\r\n\t\t\t\t\tsetTimeout(function () { ratingSnackbar.className = ratingSnackbar.className.replace(\"show\", \"\"); }, 3000);\r\n\t\t\t\t\trating.classList.remove('rating-sending');\r\n\t\t\t\t}, 500)\r\n\t\t\t} else {\r\n\t\t\t\tlet ratingSnackbar = document.getElementById(\"snackbar-rating\");\r\n\t\t\t\tratingSnackbar.textContent = 'Ошибка! Отправка на сервер недоступна,так как вы находитесь на свободном хостинге GitHubPages!'\r\n\t\t\t\tratingSnackbar.className = \"show\";\r\n\t\t\t\tsetTimeout(function () { ratingSnackbar.className = ratingSnackbar.className.replace(\"show\", \"\"); }, 3000);\r\n\t\t\t\trating.classList.remove('rating-sending');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n// -- //"]}